Vagrant.configure("2") do |config|

    
    # the appserver 
    config.vm.define "appserver" do |appserver|
      appserver.vm.box = "bento/ubuntu-18.04"
      ####### Install Puppet Agent #######
      appserver.vm.provision "shell", path: "./bootstrap.sh"
      #config.vm.network "forwarded_port", guest: 80, host: 8082
      ####### Provision #######
      appserver.vm.provision "puppet" do |puppet|
        puppet.module_path = "./site"
        puppet.options = "--verbose --debug"
      end
    end

    # the dbswerver 
    config.vm.define "dbserver" do |dbserver|
      dbserver.vm.box = "bento/ubuntu-18.04"
      ####### Install Puppet Agent #######
      dbserver.vm.provision "shell", path: "./bootstrap.sh"
      #config.vm.network "forwarded_port", guest: 80, host: 8082
      ####### Provision #######
      dbserver.vm.provision "puppet" do |puppet|
        puppet.module_path = "./site"
        puppet.options = "--verbose --debug"
      end
    end


    
end